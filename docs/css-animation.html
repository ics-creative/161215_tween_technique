<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=960, initial-scale=1.0" />
    <title>ズルいトゥイーンアニメーション</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      @property --tx { syntax: '<length>'; inherits: false; initial-value: 0px; }
      @property --ty { syntax: '<length>'; inherits: false; initial-value: 0px; }
      @property --sx { syntax: '<number>'; inherits: false; initial-value: 1; }
      @property --sy { syntax: '<number>'; inherits: false; initial-value: 1; }
      @property --rot { syntax: '<angle>'; inherits: false; initial-value: 0deg; }

      :root {
        --ease-quart: cubic-bezier(0.77, 0, 0.175, 1); /* inOutQuart 近似 */
        --ease-expo-inout: cubic-bezier(0.87, 0, 0.13, 1); /* expo.inOut 近似 */
        --ease-elastic-out-linear: linear(0, 1.35 48%, 0.92 70%, 1.08 85%, 1 100%); /* elastic.out 近似(改善) */
        --ease-back-out-4-linear: linear(0, 1.25 58%, 0.98 85%, 1 100%); /* back.out(4) 近似(改善) */
      }

      .dot { transform: translate(var(--tx), var(--ty)) rotate(var(--rot)) scaleX(var(--sx)) scaleY(var(--sy)); }

      /* 1.5s 動作 + 0.5s ホールド = 総時間 2.0s */
      @keyframes move-tx-1500 { 0% { --tx: var(--tx-from); } 66.666% { --tx: var(--tx-to); } 100% { --tx: var(--tx-to); } }
      @keyframes move-ty-1500 { 0% { --ty: var(--ty-from); } 66.666% { --ty: var(--ty-to); } 100% { --ty: var(--ty-to); } }
      @keyframes move-tx-2000 { 0% { --tx: var(--tx-from); } 75% { --tx: var(--tx-to); } 100% { --tx: var(--tx-to); } }
      @keyframes move-ty-2000 { 0% { --ty: var(--ty-from); } 75% { --ty: var(--ty-to); } 100% { --ty: var(--ty-to); } }
      @keyframes scale-2000   { 0% { --sx: var(--s-from); --sy: var(--s-from); } 75% { --sx: var(--s-to); --sy: var(--s-to); } 100% { --sx: var(--s-to); --sy: var(--s-to); } }
      @keyframes scalex-2000  { 0% { --sx: var(--sx-from); } 75% { --sx: var(--sx-to); } 100% { --sx: var(--sx-to); } }
      @keyframes scaley-2000  { 0% { --sy: var(--sy-from); } 75% { --sy: var(--sy-to); } 100% { --sy: var(--sy-to); } }

      /* 1.5s 動作 + 0.25s ホールド = 総時間 1.75s */
      @keyframes move-tx-1750 { 0% { --tx: var(--tx-from); } 85.714% { --tx: var(--tx-to); } 100% { --tx: var(--tx-to); } }
      @keyframes move-ty-1750 { 0% { --ty: var(--ty-from); } 85.714% { --ty: var(--ty-to); } 100% { --ty: var(--ty-to); } }

      /* drop の簡易バウンス（総時間 2.0s）*/
      @keyframes bounce-ty-2000 {
        0% { --ty: var(--ty-from); }
        60% { --ty: var(--ty-to); }
        75% { --ty: calc(var(--ty-to) - 35px); }
        85% { --ty: var(--ty-to); }
        92% { --ty: calc(var(--ty-to) - 15px); }
        100% { --ty: var(--ty-to); }
      }

      /* rotate: 回転（1.4s）+ ホールド0.5s = 1.9s */
      @keyframes rotate-seq-1900 { 0% { --rot: 0deg; } 21.052% { --rot: -80deg; } 42.105% { --rot: 30deg; } 73.684% { --rot: 0deg; } 100% { --rot: 0deg; } }
      /* rotate: X移動は0.3sオフセットで1.0s = 0.3/1.9=15.789%開始, 1.3/1.9=68.421% 到達 */
      @keyframes move-tx-rot-1900 { 0% { --tx: var(--tx-from); } 15.789% { --tx: var(--tx-from); } 68.421% { --tx: var(--tx-to); } 100% { --tx: var(--tx-to); } }

      /* move_01 */
      #move_01 {
        .dot { --tx-from: 100px; --ty-from: 75px; --tx-to: 600px; --ty-to: 250px; }
        .dot:nth-child(1) {
          animation: move-tx-1500 1.5s var(--ease-quart) infinite, move-ty-1500 1.5s var(--ease-quart) infinite;
        }
        .dot:nth-child(2) {
          animation: move-tx-1500 1.5s var(--ease-quart) infinite, move-ty-1500 1.5s var(--ease-back-out-4-linear) infinite;
        }
      }

      /* move_02 */
      #move_02 {
        .dot { --tx-from: 50px; --ty-from: 50px; --tx-to: 500px; --ty-to: 200px; --s-from: 0.1; --s-to: 1; }
        .dot:nth-child(1) {
          animation: move-tx-2000 2s var(--ease-quart) infinite, move-ty-2000 2s var(--ease-quart) infinite, scale-2000 2s var(--ease-quart) infinite;
        }
        .dot:nth-child(2) {
          animation: move-tx-2000 2s var(--ease-quart) infinite, move-ty-2000 2s var(--ease-back-out-4-linear) infinite, scale-2000 2s var(--ease-quart) infinite;
        }
      }

      /* move_03 */
      #move_03 {
        .dot { --tx-from: 100px; --ty-from: 100px; --tx-to: 600px; --ty-to: 250px; }
        .dot:nth-child(1) { animation: move-tx-1750 1.75s var(--ease-quart) infinite, move-ty-1750 1.75s var(--ease-quart) infinite; }
        .dot:nth-child(2) { animation: move-tx-1750 1.75s var(--ease-quart) infinite, move-ty-1750 1.75s linear infinite; }
      }

      /* expand */
      #expand {
        .dot:nth-child(1) { --tx: 200px; --ty: 200px; --sx-from: 0.3; --sy-from: 0.3; --sx-to: 1; --sy-to: 1; }
        .dot:nth-child(2) { --tx: 500px; --ty: 200px; --sx-from: 0.3; --sy-from: 0.3; --sx-to: 1; --sy-to: 1; }
        .dot:nth-child(1) {
          animation: scalex-2000 2s infinite, scaley-2000 2s infinite;
          animation-timing-function: var(--ease-elastic-out-linear), var(--ease-elastic-out-linear);
        }
        .dot:nth-child(2) {
          animation: scalex-2000 2s infinite, scaley-2000 2s infinite;
          animation-delay: 0s, 0.1s;
          animation-timing-function: var(--ease-elastic-out-linear), var(--ease-elastic-out-linear);
        }
      }

      /* rotate */
      #rotate {
        .dot:nth-child(1) { --tx-from: 100px; --tx-to: 600px; --ty: 125px; }
        .dot:nth-child(2) { --tx-from: 100px; --tx-to: 600px; --ty: 275px; }
        .dot:nth-child(1) { animation: move-tx-rot-1900 1.9s var(--ease-expo-inout) infinite; }
        .dot:nth-child(2) { animation: rotate-seq-1900 1.9s ease-in-out infinite, move-tx-rot-1900 1.9s var(--ease-expo-inout) infinite; }
      }

      /* drop */
      #drop {
        .dot:nth-child(1) { --tx: 220px; --ty-from: -100px; --ty-to: 275px; animation: bounce-ty-2000 2s ease-out infinite; }
        .dot:nth-child(2) {
          --tx: 500px; --ty-from: -100px; --ty-to: 275px; --sx-from: 0.2; --sy-from: 2; --sx-to: 1; --sy-to: 1; transform-origin: center 100%;
          animation: bounce-ty-2000 2s ease-out infinite, scalex-2000 2s infinite, scaley-2000 2s infinite;
          animation-delay: 0s, 0.45s, 0.45s;
          animation-timing-function: ease-out, var(--ease-back-out-4-linear), var(--ease-back-out-4-linear);
        }
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const hash = location.hash;
        if (hash.length) {
          const demoContainer = document.getElementById(hash.substr(1, hash.length));
          if (demoContainer) demoContainer.hidden = false;
        } else {
          const containers = document.querySelectorAll(".demo-container");
          for (const element of containers) element.hidden = false;
        }
      });
    </script>
  </head>
  <body>
    <div id="root">
      <div id="move_01" class="demo-container" hidden>
        <div class="dot dot-100 ghost"></div>
        <div class="dot dot-100"></div>
        <p>水平と垂直の移動を、異なるイージングにして凝った感を</p>
      </div>
      <div id="move_02" class="demo-container" hidden>
        <div class="dot dot-200 ghost"></div>
        <div class="dot dot-200"></div>
        <p>垂直移動を異なるイージングにして、奥行き感をだす</p>
      </div>
      <div id="move_03" class="demo-container" hidden>
        <div class="dot dot-100 ghost"></div>
        <div class="dot dot-100"></div>
        <p>垂直移動を異なるイージングにして、ジグザグの動きに</p>
      </div>
      <div id="expand" class="demo-container" hidden>
        <div class="dot dot-200"></div>
        <div class="dot dot-200"></div>
        <p>拡大時に、垂直と水平のタイミングをずらす</p>
      </div>
      <div id="rotate" class="demo-container" hidden>
        <div class="dot dot-100 rotate"></div>
        <div class="dot dot-100 rotate"></div>
        <p>横移動に、回転の動作を加える</p>
      </div>
      <div id="drop" class="demo-container" hidden>
        <div class="dot dot-100"></div>
        <div class="dot dot-100"></div>
        <p>落ちて跳ねるときに、伸縮の動作を加える</p>
      </div>
    </div>

    <script></script>
  </body>
</html>

<html>
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  
  <title>ズルいトゥイーンアニメーション</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    body {
      font-size:62.5%;
    }
    canvas {
      margin: 50px 0;
      background-color: #fbf9eb;
      display: none;
/*      overflow: hidden*/
    }
    #root {
      margin: auto;
      width: 720px;
      transform-origin:left top;
    }
    .visible {
      display: block;
    }
  </style>
  <script type="text/javascript" src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
      
</head>
<body>
  <div id="root">

    <canvas id="move_01" width="720" height="405"></canvas>
    <script>
      (function(){
        var stage = new createjs.Stage("move_01");
        var container = new createjs.Container();
        container.x = container.y = 50;
        stage.addChild(container);

        var mt1 = new createjs.Bitmap("images/mitarashi_100.png");
        var mt2 = new createjs.Bitmap("images/mitarashi_100.png");
        mt1.alpha = 0.5;
        container.addChild(mt1);
        container.addChild(mt2);

        // 同じイージングで変化させる場合
        createjs.Tween.get(mt1, {loop: true}).wait(500).to({x: 520, y: 200}, 1000, createjs.Ease.quartInOut).wait(500);

        // Y座標だけイージングをbackOutに変更した場合
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({x: 520}, 1000, createjs.Ease.quartInOut).wait(500);
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({y: 200}, 1000, createjs.Ease.backOut).wait(500);

        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener("tick", function(){
          stage.update();
        });
      })();
    </script>

    <canvas id="move_02" width="720" height="405"></canvas>
    <script>
      (function(){
        var stage = new createjs.Stage("move_02");
        var container = new createjs.Container();
        container.x = container.y = 50;
        stage.addChild(container);

        var mt1 = new createjs.Bitmap("images/mitarashi_400.png");
        var mt2 = new createjs.Bitmap("images/mitarashi_400.png");
        mt1.alpha = 0.5;
        mt1.x = mt1.y = 20;
        mt2.x = mt2.y = 20;
        mt1.regX = mt1.regY = 200;
        mt2.regX = mt2.regY = 200;
        mt1.scaleX = mt1.scaleY = 0.1;
        mt2.scaleX = mt2.scaleY = 0.1;
        container.addChild(mt1);
        container.addChild(mt2);

        // 同じイージングで変化させる場合
        createjs.Tween.get(mt1, {loop: true}).wait(500).to({x: 310, y: 150, scaleX: 1, scaleY: 1}, 1000, createjs.Ease.quartInOut).wait(500);

        // 拡大のトゥイーンを追加した場合
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({x: 310}, 1000, createjs.Ease.quartInOut).wait(500);
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({y: 150}, 1000, createjs.Ease.backOut).wait(500);
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({scaleX: 1, scaleY: 1}, 1000, createjs.Ease.quartInOut).wait(500);

        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener("tick", function(){
          stage.update();
        });
      })();
    </script>

    <canvas id="move_03" width="720" height="405"></canvas>
    <script>
      (function(){
        var stage = new createjs.Stage("move_03");
        var container = new createjs.Container();
        container.x = container.y = 50;
        stage.addChild(container);

        var mt1 = new createjs.Bitmap("images/mitarashi_100.png");
        var mt2 = new createjs.Bitmap("images/mitarashi_100.png");
        mt1.alpha = 0.5;
        container.addChild(mt1);
        container.addChild(mt2);

        // 同じイージングで変化させる場合
        createjs.Tween.get(mt1, {loop: true}).wait(500).to({x: 520, y: 200}, 1000, createjs.Ease.quartInOut).wait(500);

        // Y座標だけイージングをlinearに変更した場合
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({x: 520}, 1000, createjs.Ease.quartInOut).wait(500);
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({y: 200}, 1000, createjs.Ease.linear).wait(500);

        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener("tick", function(){
          stage.update();
        });
      })();
    </script>

    <canvas id="expand" width="720" height="405"></canvas>
    <script>
      (function(){
        var stage = new createjs.Stage("expand");
        var container = new createjs.Container();
        container.x = container.y = 50;
        stage.addChild(container);

        var mt1 = new createjs.Bitmap("images/mitarashi_200.png");
        var mt2 = new createjs.Bitmap("images/mitarashi_200.png");
        mt1.x = 175;
        mt1.y = 150;
        mt2.x = 450;
        mt2.y = 150;
        mt1.regX = mt1.regY = 100;
        mt2.regX = mt2.regY = 100;
        mt1.scaleX = mt1.scaleY = 0.3;
        mt2.scaleX = mt2.scaleY = 0.3;
        container.addChild(mt1);
        container.addChild(mt2);

        // 同時に再生する場合
        createjs.Tween.get(mt1, {loop: true}).wait(500).to({scaleX: 1, scaleY: 1}, 1000, createjs.Ease.elasticOut).wait(600);

        // 縦方向のスケールを0.1秒ずらして再生した場合
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({scaleX: 1}, 1000, createjs.Ease.elasticOut).wait(600);
        createjs.Tween.get(mt2, {loop: true}).wait(600).to({scaleY: 1}, 1000, createjs.Ease.elasticOut).wait(500);

        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener("tick", function(){
          stage.update();
        });
      })();
    </script>

    <canvas id="rotate" width="720" height="405"></canvas>
    <script>
      (function(){
        var stage = new createjs.Stage("rotate");
        var container = new createjs.Container();
        container.x = container.y = 50;
        stage.addChild(container);

        var mt1 = new createjs.Bitmap("images/mitarashi_100.png");
        var mt2 = new createjs.Bitmap("images/mitarashi_100.png");
        mt1.x = 75;
        mt2.x = 75;
        mt1.y = 125;
        mt2.y = 275;
        mt1.regX = 50;
        mt1.regY = 100;
        mt2.regX = 50;
        mt2.regY = 100;
        container.addChild(mt1);
        container.addChild(mt2);

        // 横移動のみの場合
        createjs.Tween.get(mt1, {loop: true}).wait(500).to({x: 545, alpha: 1}, 600, createjs.Ease.circInOut).wait(700);

        // 横移動に回転の動きを加えた場合
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({x: 545, alpha: 1}, 600, createjs.Ease.circInOut).wait(700);
        createjs.Tween.get(mt2, {loop: true}).wait(200)
          .to({rotation: -30}, 400, createjs.Ease.circOut)
          .to({rotation: 10}, 600, createjs.Ease.circInOut)
          .to({rotation: 0}, 300, createjs.Ease.getBackOut(4))
          .wait(300);

        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener("tick", function(){
          stage.update();
        });
      })();
    </script>

    <canvas id="drop" width="720" height="405"></canvas>
    <script>
      (function(){
        var stage = new createjs.Stage("drop");
        var container = new createjs.Container();
        container.x = container.y = 50;
        stage.addChild(container);

        var mt1 = new createjs.Bitmap("images/mitarashi_100.png");
        var mt2 = new createjs.Bitmap("images/mitarashi_100.png");
        mt1.x = 170;
        mt1.y = -100;
        mt2.x = 420;
        mt2.y = -100;
        mt2.scaleX = 0.2;
        mt2.scaleY = 2;
        mt1.regX = 50;
        mt1.regY = 100;
        mt2.regX = 50;
        mt2.regY = 100;
        container.addChild(mt1);
        container.addChild(mt2);

        // 落ちて跳ねる動きのみの場合
        createjs.Tween.get(mt1, {loop: true}).wait(500).to({y: 300}, 1000, createjs.Ease.bounceOut).wait(500);

        // 落ちて跳ねる動きに、伸縮の動きを加えた場合
        createjs.Tween.get(mt2, {loop: true}).wait(500).to({y: 300}, 1000, createjs.Ease.bounceOut).wait(500);
        createjs.Tween.get(mt2, {loop: true}).wait(800).to({scaleX: 1, scaleY: 1}, 300, createjs.Ease.getBackOut(4)).wait(900);

        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener("tick", function(){
          stage.update();
        });
      })();
    </script>
  </div>
  
  <script>
    //リサイズ処理
    function resize() {
      var root = document.getElementById("root");
      var scale = Math.min(window.innerWidth / 720, 1);
      root.style.transform = "scale(" + scale + ")";
      root.style.webkitTransform = "scale(" + scale + ")";
      root.style.MozTransform = "scale(" + scale + ")";
      root.style.height = root.clientHeight;
      
    }
    window.onresize = resize;
    resize();
    
    // ハッシュで表示を切り替える
    var canvas;
    var hash = location.hash;
    
    if (hash.length) {
      canvas = document.getElementById(hash.substr(1, hash.length));
      canvas.classList.add("visible");
    }
    else {
      var canvases = document.getElementsByTagName("canvas");
      for (canvas of canvases) {
        canvas.classList.add("visible");
      }
    }
  </script>
</body>
</html>
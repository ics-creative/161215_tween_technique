<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=960, initial-scale=1.0" />
    <title>Anime.js版</title>
    <link rel="stylesheet" href="styles.css" />
    <script type="importmap">
      {
        "imports": {
          "animejs": "https://cdn.jsdelivr.net/npm/animejs@4.1.3/+esm"
        }
      }
    </script>
    <script type="module">
      import { animate, createTimeline, utils } from "animejs";

      // move_01: 基本的な移動アニメーション
      function initMove01() {
        const container = document.querySelector("#move_01");
        const dot1 = container.querySelector(".dot:nth-child(1)");
        const dot2 = container.querySelector(".dot:nth-child(2)");

        // 座標定義
        const positionFrom = { x: 100, y: 75 };
        const positionTo = { x: 600, y: 250 };

        // 初期位置
        utils.set([dot1, dot2], positionFrom);

        // アニメーション1: 同じイージング
        const a1 = animate(dot1, {
          x: positionTo.x,
          y: positionTo.y,
          duration: 1000,
          ease: "inOutQuart",
        });

        const a2 = animate(dot2, {
          x: { to: positionTo.x, duration: 1000, ease: "inOutQuart" },
          y: { to: positionTo.y, duration: 1000, ease: "outBack" },
        });

        createTimeline({ loop: true, loopDelay: 500 }).sync(a1, 0).sync(a2, 0);
      }

      // move_02: スケール付き移動アニメーション
      function initMove02() {
        const container = document.querySelector("#move_02");
        const dot1 = container.querySelector(".dot:nth-child(1)");
        const dot2 = container.querySelector(".dot:nth-child(2)");

        // 座標定義
        const positionFrom = { x: 50, y: 50 };
        const positionTo = { x: 500, y: 200 };
        const scaleFromValue = 0.1;
        const scaleToValue = 1;

        // 初期位置
        utils.set([dot1, dot2], positionFrom);
        utils.set([dot1, dot2], { scale: scaleFromValue });

        // アニメーション1: 同じイージング
        const a1 = animate(dot1, {
          x: positionTo.x,
          y: positionTo.y,
          scale: scaleToValue,
          duration: 1500,
          ease: "inOutQuart",
        });

        // アニメーション2: X座標
        const a2 = animate(dot2, {
          x: { to: positionTo.x, duration: 1500, ease: "inOutQuart" },
          y: { to: positionTo.y, duration: 1500, ease: "outBack" },
          scale: { to: scaleToValue, duration: 1500, ease: "inOutQuart" },
        });

        createTimeline({ loop: true, loopDelay: 500 }).sync(a1, 0).sync(a2, 0);
      }

      // move_03: リニア移動アニメーション
      function initMove03() {
        const container = document.querySelector("#move_03");
        const dot1 = container.querySelector(".dot:nth-child(1)");
        const dot2 = container.querySelector(".dot:nth-child(2)");

        // 座標定義
        const positionFrom = { x: 100, y: 100 };
        const positionTo = { x: 600, y: 250 };

        // 初期位置
        utils.set([dot1, dot2], positionFrom);

        // アニメーション1: 同じイージング
        const a1 = animate(dot1, {
          x: positionTo.x,
          y: positionTo.y,
          duration: 1500,
          ease: "inOutQuart",
        });

        // アニメーション2: 異なるイージング
        const a2 = animate(dot2, {
          x: { to: positionTo.x, duration: 1500, ease: "inOutQuart" },
          y: { to: positionTo.y, duration: 1500, ease: "linear" },
        });

        createTimeline({ loop: true, loopDelay: 250 }).sync(a1, 0).sync(a2, 0);
      }

      // expand: 伸縮アニメーション
      function initExpand() {
        const container = document.querySelector("#expand");
        const dot1 = container.querySelector(".dot:nth-child(1)");
        const dot2 = container.querySelector(".dot:nth-child(2)");

        // 座標定義（開始点と終了点が同じ）
        const position1 = { x: 200, y: 200 };
        const position2 = { x: 500, y: 200 };
        const scaleFromValue = 0.3;
        const scaleToValue = 1;

        // 初期位置とスケールを設定
        utils.set(dot1, {
          ...position1,
          scaleX: scaleFromValue,
          scaleY: scaleFromValue,
        });
        utils.set(dot2, {
          ...position2,
          scaleX: scaleFromValue,
          scaleY: scaleFromValue,
        });

        // アニメーション1: 同時に再生
        const a1 = animate(dot1, {
          scaleX: scaleToValue,
          scaleY: scaleToValue,
          duration: 1500,
          ease: "outElastic",
        });

        // アニメーション2: タイミングをずらしたスケール
        const a2 = animate(dot2, {
          scaleX: { to: scaleToValue, duration: 1500, ease: "outElastic" },
          scaleY: {
            to: scaleToValue,
            duration: 1500,
            ease: "outElastic",
            delay: 100,
          },
        });

        createTimeline({ loop: true, loopDelay: 500 }).sync(a1, 0).sync(a2, 0);
      }

      // rotate: 回転アニメーション
      function initRotate() {
        const container = document.querySelector("#rotate");
        const dot1 = container.querySelector(".dot:nth-child(1)");
        const dot2 = container.querySelector(".dot:nth-child(2)");

        // 座標定義
        const positionFrom1 = { x: 100, y: 125 };
        const positionTo1 = { x: 600, y: 125 };
        const positionFrom2 = { x: 100, y: 275 };
        const positionTo2 = { x: 600, y: 275 };

        // 初期位置を設定
        utils.set(dot1, positionFrom1);
        utils.set(dot2, positionFrom2);

        // アニメーション1: 横移動のみ
        const a1 = animate(dot1, {
          x: positionTo1.x,
          duration: 1000,
          ease: "inOutExpo",
        });

        // アニメーション2: 横移動
        const a2 = animate(dot2, {
          x: {
            to: positionTo2.x,
            duration: 1000,
            ease: "inOutExpo",
            delay: 300,
          },
          rotate: [
            { to: 0 },
            { to: -80, duration: 400, easing: "outExpo" },
            { to: 30, duration: 400, easing: "inExpo" },
            { to: 0, duration: 600, easing: "outBack" },
          ],
        });
        createTimeline({ loop: true, loopDelay: 500 })
          .sync(a2, 0)
          .sync(a1, 300);
      }

      // drop: 落下アニメーション
      function initDrop() {
        const container = document.querySelector("#drop");
        const dot1 = container.querySelector(".dot:nth-child(1)");
        const dot2 = container.querySelector(".dot:nth-child(2)");

        // 座標定義
        const positionFrom1 = { x: 220, y: -100 };
        const positionTo1 = { y: 275 };
        const positionFrom2 = { x: 500, y: -100 };
        const positionTo2 = { y: 275 };
        const scaleFrom = { x: 0.2, y: 2 };
        const scaleTo = { x: 1, y: 1 };

        // 初期位置を設定
        utils.set(dot1, positionFrom1);
        utils.set(dot2, {
          ...positionFrom2,
          scaleX: scaleFrom.x,
          scaleY: scaleFrom.y,
        });
        dot2.style.transformOrigin = "center 100%";

        // アニメーション1: 落ちて跳ねる動きのみ
        const a1 = animate(dot1, {
          y: positionTo1.y,
          duration: 1500,
          ease: "outBounce",
        });

        // アニメーション2: 複合アニメーション
        const a2 = animate(dot2, {
          y: { to: positionTo2.y, duration: 1500, ease: "outBounce" },
          scaleX: {
            to: scaleTo.x,
            duration: 450,
            ease: "outBack(4)",
            delay: 450,
          },
          scaleY: {
            to: scaleTo.y,
            duration: 450,
            ease: "outBack(4)",
            delay: 450,
          },
        });

        createTimeline({ loop: true, loopDelay: 500 }).sync(a1, 0).sync(a2, 0);
      }

      // 初期化
      document.addEventListener("DOMContentLoaded", () => {
        const containers = document.querySelectorAll(".demo-container");
        const id = location.hash.slice(1);

        containers.forEach((element) => {
          element.hidden = id ? element.id !== id : false;
        });

        initMove01();
        initMove02();
        initMove03();
        initExpand();
        initRotate();
        initDrop();
      });
    </script>
  </head>
  <body>
    <div id="root">
      <div id="move_01" class="demo-container">
        <div class="dot dot-100 ghost"></div>
        <div class="dot dot-100"></div>
        <p>水平と垂直の移動を、異なるイージングにして凝った感を</p>
      </div>
      <div id="move_02" class="demo-container">
        <div class="dot dot-200 ghost"></div>
        <div class="dot dot-200"></div>
        <p>垂直移動を異なるイージングにして、奥行き感をだす</p>
      </div>
      <div id="move_03" class="demo-container">
        <div class="dot dot-100 ghost"></div>
        <div class="dot dot-100"></div>
        <p>垂直移動を異なるイージングにして、ジグザグの動きに</p>
      </div>
      <div id="expand" class="demo-container">
        <div class="dot dot-200"></div>
        <div class="dot dot-200"></div>
        <p>拡大時に、垂直と水平のタイミングをずらす</p>
      </div>
      <div id="rotate" class="demo-container">
        <div class="dot dot-100 rotate"></div>
        <div class="dot dot-100 rotate"></div>
        <p>横移動に、回転の動作を加える</p>
      </div>
      <div id="drop" class="demo-container">
        <div class="dot dot-100"></div>
        <div class="dot dot-100"></div>
        <p>落ちて跳ねるときに、伸縮の動作を加える</p>
      </div>
    </div>

    <script></script>
  </body>
</html>
